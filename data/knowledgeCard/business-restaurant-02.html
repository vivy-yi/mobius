<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>餐饮店开设常见问题 - Mobius 知识库</title>
    <meta name="description" content="全面解答在日本开设餐饮店的各种问题，包括许可证申请、卫生要求、选址建议等。">
    <meta name="keywords" content="餐饮店开设,日本餐厅,食品经营许可,开店流程">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="餐饮店开设常见问题 - Mobius 知识库">
    <meta property="og:description" content="全面解答在日本开设餐饮店的各种问题，包括许可证申请、卫生要求、选址建议等。">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://mobius-service.com/knowledge/business-faq-restaurant">
    <meta property="og:site_name" content="Mobius 知识库">
    <meta property="og:locale" content="zh_CN">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="餐饮店开设常见问题 - Mobius 知识库">
    <meta name="twitter:description" content="全面解答在日本开设餐饮店的各种问题，包括许可证申请、卫生要求、选址建议等。">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="../assets/imgs/favicon.ico">

    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">

    <!-- Main CSS -->
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../../styles/css/components/knowledge-detail.css">

    <!-- Critical CSS Inline -->
    <style>
        /* 防止页面闪烁的关键CSS */
        body {
            font-family: 'Inter', 'Noto Sans SC', sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            padding: 0;
            background: #f8f9fa;
        }
        .article-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            background: white;
            min-height: 100vh;
        }
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-size: 1.2rem;
            color: #666;
        }
        .nav-breadcrumb {
            background: #f8f9fa;
            padding: 1rem 0;
            border-bottom: 1px solid #e9ecef;
        }
        .breadcrumb-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: #6c757d;
        }
        .breadcrumb a {
            color: var(--tech-blue, #3b82f6);
            text-decoration: none;
            transition: color 0.3s ease;
        }
        .breadcrumb a:hover, .breadcrumb a:focus {
            color: #1e40af;
            text-decoration: underline;
            outline: 2px solid var(--tech-blue, #3b82f6);
            outline-offset: 2px;
        }
        .error-message {
            text-align: center;
            padding: 3rem 2rem;
            color: var(--accent-red, #dc2626);
        }
        .error-message i {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--accent-red, #dc2626);
        }
        .error-message h2 {
            color: var(--accent-red, #dc2626);
            margin-bottom: 1rem;
        }
        .error-message a {
            color: var(--tech-blue, #3b82f6);
            text-decoration: none;
            font-weight: 600;
        }
        .error-message a:hover, .error-message a:focus {
            text-decoration: underline;
            color: #1e40af;
        }
    </style>
</head>
<body>
    <!-- 导航栏将由动态加载 -->
    <div id="navbar-container"></div>

    <!-- 面包屑导航 -->
    <nav class="nav-breadcrumb" role="navigation" aria-label="面包屑导航">
        <div class="breadcrumb-container">
            <div class="breadcrumb">
                <a href="../index.html" aria-label="返回首页">
                    <i class="fas fa-home"></i>
                </a>
                <span aria-hidden="true">/</span>
                <a href="../knowledge.html" aria-label="知识库首页">知识库</a>
                <span aria-hidden="true">/</span>
                <span aria-current="page">商业咨询</span>
            </div>
        </div>
    </nav>

    <!-- 文章容器 -->
    <main class="article-container" role="main">
        <article id="article-content">
            <!-- 文章内容将通过JavaScript动态加载 -->
            <div class="loading" aria-live="polite">
                <i class="fas fa-spinner fa-spin" aria-hidden="true"></i>
                <span style="margin-left: 0.5rem;"><h2>1. 在留资格要求</h2>

                        <h3>1.1 主要在留资格类型</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>在留资格</th>
                                    <th>适合性</th>
                                    <th>要求</th>
                                    <th>备注</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>经营・管理签证</strong></td>
                                    <td>✅ 最适合</td>
                                    <td>资本金500万日元以上</td>
                                    <td>可直接经营管理餐厅</td>
                                </tr>
                                <tr>
                                    <td><strong>永住者</strong></td>
                                    <td>✅ 适合</td>
                                    <td>无限制</td>
                                    <td>活动无限制</td>
                                </tr>
                                <tr>
                                    <td><strong>日本人的配偶等</strong></td>
                                    <td>✅ 适合</td>
                                    <td>无限制</td>
                                    <td>活动无限制</td>
                                </tr>
                                <tr>
                                    <td><strong>定住者</strong></td>
                                    <td>⚠️ 视情况</td>
                                    <td>根据定住活动范围</td>
                                    <td>需确认许可范围</td>
                                </tr>
                                <tr>
                                    <td><strong>技术・人文知识・国际业务</strong></td>
                                    <td>❌ 不适合</td>
                                    <td>仅限技术工作</td>
                                    <td>不能直接经营</td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>1.2 经营・管理签证具体要求</h3>
                        <ul>
                            <li><strong>资本金要求：</strong>至少500万日元</li>
                            <li><strong>办公场所：</strong>需要独立的办公室空间（不能是住宅的一部分）</li>
                            <li><strong>事业计划：</strong>需要提交详细的商业计划书</li>
                            <li><strong>持续性：</strong>需要有持续经营的可行性</li>
                            <li><strong>实际经营：</strong>需要本人实际参与经营管理</li>
                        </ul>

                        <div class="info-box">
                            <p><strong>重要提示：</strong>如果没有合适的在留资格，可以先设立公司并申请经营・管理签证，或者寻找有合适签证的合作伙伴。</p>
                        </div></span>
            </div>
        </article>
    </main>

    <!-- 页脚将由动态加载 -->
    <div id="footer-container"></div>

    <!-- JavaScript 文件 -->
    <script src="../components/components.js" defer></script>
    <script src="../components/knowledge-detail.js" defer></script>

    <!-- 文章特定脚本 -->
    <script>
        // 安全的DOM操作工具函数
        function safeCreateElement(tag, className, textContent) {
            const element = document.createElement(tag);
            if (className) element.className = className;
            if (textContent) element.textContent = textContent;
            return element;
        }

        // 安全地设置元素内容
        function safeSetContent(element, content) {
            // 清空现有内容
            while (element.firstChild) {
                element.removeChild(element.firstChild);
            }

            if (typeof content === 'string') {
                element.textContent = content;
            } else if (content instanceof Node) {
                element.appendChild(content);
            }
        }

        // 错误处理 - 使用安全的DOM操作方法
        window.addEventListener('error', function(e) {
            console.error('文章页面加载错误:', e.error);
            const articleContent = document.getElementById('article-content');
            if (articleContent) {
                // 清空现有内容
                while (articleContent.firstChild) {
                    articleContent.removeChild(articleContent.firstChild);
                }

                // 创建错误消息容器
                const errorDiv = safeCreateElement('div', 'error-message');
                errorDiv.setAttribute('role', 'alert');

                // 创建图标
                const icon = safeCreateElement('i', 'fas fa-exclamation-triangle');
                icon.setAttribute('aria-hidden', 'true');
                errorDiv.appendChild(icon);

                // 创建标题
                const title = safeCreateElement('h2', '', '文章加载失败');
                errorDiv.appendChild(title);

                // 创建描述段落
                const paragraph = safeCreateElement('p', '', '抱歉，文章内容加载失败。请尝试刷新页面或');

                // 创建链接
                const link = safeCreateElement('a', '', '返回知识库首页');
                link.href = '../knowledge.html';
                link.setAttribute('aria-label', '返回知识库首页');

                paragraph.appendChild(link);
                errorDiv.appendChild(paragraph);

                articleContent.appendChild(errorDiv);
            }
        });

        // 页面性能监控
        window.addEventListener('load', function() {
            if ('performance' in window) {
                const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
                console.log(`文章页面加载时间: ${loadTime}ms`);
            }
        });

        // 键盘导航支持
        document.addEventListener('keydown', function(e) {
            // ESC键返回知识库
            if (e.key === 'Escape') {
                window.location.href = '../knowledge.html';
            }
        });
    </script>
</body>
</html>